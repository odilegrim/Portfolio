---
title: "Portfolio Computational Musicology"
author: "Odile Grim"
date: "2021"
output: 
  flexdashboard::flex_dashboard:
    storyboard: true
---
```{r}
library(plotly)
```

### Corpus intdocution

For my corpus I would like to look at the repertoire of Bring Me The Horizon. Since the release of their first four albums, which can, according to Google, all be classified as "metalcore", their music has progressed more towards alternative-/pop-/electronic-rock and they even released an [EP with experimental and electronic music](https://open.spotify.com/album/6yC6aLzX5knhWpKDidwxft). Having been in their fanbase since around 2013, when *Sempiternal* was released, I myself experienced the changes in their music. Some people argue that only their "old" music is good and their new music is "too soft", leading to them not listening to the band's music anymore. My question is, what exactly has changed about their music, which aspects have remained similar to their early music and which haven't? Also, how has this affected their listeners/ fanbase? Did the demographics change? I definitely think that BMTH's music after 2013 has changed significantly compared to their earlier music and it will be most interesting to dive deeper into their work from that time on. As for specific tracks to look at *Pray for Plagues*, *Chelsea Smile* and *Shadow Moses* from their earlier work and *Drown*, *Mantra* and *Ludens* from their more recent work might be representative tracks, as they were all released as singles and thus viewed as important. Some of their more recent albums include different genres within them, so it might also be useful to examine those more closely and determine what and how big those differences are and whether they are significant.


### Bring Me The Horizon: different music styles compared

```{r}
library(tidyverse)
library(spotifyr)
library(plotly)

old <- get_playlist_audio_features("", "6oeRMX8XZ8IS7MCDb6Z1BG")
new <- get_playlist_audio_features("", "4k98rVhcCw54dhLaUMiyLK")
experimental <- get_playlist_audio_features("", "1EIpRI9TozVUiehlxAmmHq")

oldvsnew <-
  bind_rows(
    old %>% mutate(category = "Old music"),
    new %>% mutate(category = "New music"),
    experimental %>% mutate(category = "Experimental")
  )

differentstyles <- ggplot(oldvsnew, 
       aes(x = valence, y = energy, color = speechiness, size = danceability)) +
  geom_jitter(alpha = 0.5) +
  facet_wrap(~category) +
  scale_color_gradient(low = "black", high = "purple")+
  theme_linedraw() +
  labs(title = "Bring Me The Horizon: different music styles") +
  theme(plot.title = element_text( 
                                  face = "bold", 
                                  color = "black",
                                  hjust = 0.5,
                                  size = 15)) +
  theme(legend.title = element_text(
                                    color = "black",
                                    size = 12
                                    )) +
  theme(axis.title = element_text(
                                  size = 12)) +
  xlab("Valence") + ylab("Energy") +
  theme(strip.text.x =  element_text(family = "mono")) +
    geom_text(
    aes(x = valence, y = energy, label = label),
  data = tibble(label = c("A Devastating Liberation", 
                          "i apologise if 
                          you feel something",
                          "Memorial"), 
                category = c("Experimental", "New music", "Old music"), 
                valence = c(0.3, 0.2, 0.15),
                energy = c(0.17, 0.295, 0.085)),
  color = "darkred",
  size = 3
  ) +
  geom_text(
    aes(x = valence, y = energy, label = label),
    data = tibble(label = c("Danceable", "Not danceable" ),
                  category = c("New music", "New music"),
                  valence = c(0.43, 0.47),
                  energy = c(0.55, 0.47)),
    color = "grey30",
    size = 2.8
  ) +
  theme(text = element_text(family = "mono"))

ggplotly(differentstyles)
  
```

***

For this plot I have split Bring Me The Horizon's music into three different categories, "Old Music" containing their first four albums , "New music" containing their three most recent releases with exception of their experimental music from *Music to listen to~*, which is the third category. The reason I separated this work from the two main categories, is that it isn't exactly representative of either their "new" or "old" music style (hence "Experimental").
  It is easily visible that Bring Me The Horizon's new music is much more varied than their old music. High energy and low valence means the music is angry, and high energy with high valence is happy. Considering this, we could conclude that their music has overall become happier. However, since the valence scores are mostly <0.5, you probably wouldn't say it was happy in itself, just happier than their old music. The experimental music has very low valence values, like BMTH's old music, and is also more angry and negative. Each category seems to have outliers that fall into the 'sad music' area, they are labeled in the plot.
  
  The danceability, indicated by size, makes it visible that especially the very sad outliers are less "danceable" than the rest of them. Happier songs, mainly their new music, seem to be the most "danceable", but most of the music from *Music to listen to~* also seems to be more danceable. With the highest danceability score being 0.6 out of a possible maximum of 1, however, most of their music could not be considered as very danceable. The speechiness, indicated by colour, generally seems to be higher with higher numbers in valence, but also deffinitely has some outliers. Generally their music doesn't seem to be very speechy or to have an especially clear pattern in it in combination with the other factors shown here. Looking at all their work together, BMTH seems to make very energetic music, with most of their songs having an energy score above 0.75 out of 1. Their music seems to have progressed from negative and angry towards a more diverse and positive style, with almost a kind of "dip" back towards negativity in their experimental album. 
  
### Homework week 7

```{r}
library(spotifyr)
library(compmus)
library(tidyverse)

memorial <- get_tidy_audio_analysis("2VseRAuxHRFtlvr5zP1fKE?si=6d86a7afadaa4b93") %>%
  select(segments) %>%
  unnest(segments) %>%
  select(start, duration, pitches)

memorial %>%
  mutate(pitches = map(pitches, compmus_normalise, "euclidean")) %>%
  compmus_gather_chroma() %>% 
  ggplot(
    aes(
      x = start + duration / 2,
      width = duration,
      y = pitch_class,
      fill = value
    )
  ) +
  geom_tile() +
  labs(x = "Time (s)", y = NULL, fill = "Magnitude") +
  theme_minimal() +
  scale_fill_viridis_c() +
  theme(text = element_text(family = "mono"))

onebyone <- get_tidy_audio_analysis("6sIbv1oWOuma2qV907MUbk?si=682db21021724ae8") %>%
  select(segments) %>%
  unnest(segments) %>%
  select(start, duration, pitches)


```


***

This is a chromagram of the song *Memorial*, which is, according to it's measurements of valence and energy, the saddest song in Bring Me The Horizon's entire repertoire. As you can see, the song is quite repetitive and has a few layers that really stand out. *Memorial* is an entirely instrumental song with a continuous underlying sound and is used in the album as a transition into the next track. There are clearly audible, and in the chromagram visible, high screeching noises in the song and few notes that are being played repeatedly. The texture of the song is very made very clear when looking at this chromagram.

