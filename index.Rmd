---
title: "Portfolio Computational Musicology"
author: "Odile Grim"
date: "2021"
output: 
  flexdashboard::flex_dashboard:
    theme: journal
---
```{r}
library(plotly)
```

**Homework week 8** {.storyboard}
=======================================================

### Timbre analysis for the most average song of BMTH's old music (homework week 8)
```{r}
library(spotifyr)
library(ggplot2)
library(tidyverse)
library(compmus)
library(plotly)
  
swoeo <-
  get_tidy_audio_analysis("1JGhCrOUIPdYG2n6K26SXE") %>% # Change URI.
  compmus_align(sections, segments) %>%                     # Change `bars`
  select(sections) %>%                                      #   in all three
  unnest(sections) %>%                                      #   of these lines.
  mutate(
    pitches =
      map(segments,
          compmus_summarise, pitches,
          method = "rms", norm = "euclidean"              # Change summary & norm.
      )
  ) %>%
  mutate(
    timbre =
      map(segments,
          compmus_summarise, timbre,
          method = "rms", norm = "euclidean"              # Change summary & norm.
      )
  )

swoeo %>%
  compmus_gather_timbre() %>%
  ggplot(
    aes(
      x = start + duration / 2,
      width = duration,
      y = basis,
      fill = value
    )
  ) +
  geom_tile() +
  labs(x = "Time (s)", y = NULL, fill = "Magnitude") +
  scale_fill_viridis_c() +                              
  theme_classic() +
  labs(title = "Sleep With One Eye Open") +
  theme(text = element_text(family = "mono"))
```

***
A cepstrogram of the song *Sleep With One Eye Open*, which is the song with values closest to the mean valence, energy and speechiness in the "Old Music" category.

*(I have a little bit of trouble interpreting these cepstrograms and apart from comparing the one for their old music and the one for their new music purely based on what it looks like, I don't exactly know what it means. Does anyone have tips or feedback on this?)*

### Timbre analysis for the most average song of BMTH's new music (homework week 8)

```{r}
library(spotifyr)
library(ggplot2)
library(tidyverse)
library(compmus)
library(plotly)
  
ouch <-
  get_tidy_audio_analysis("1PWFyfV7yYhlxHZX2g25wS") %>% # Change URI.
  compmus_align(sections, segments) %>%                     # Change `bars`
  select(sections) %>%                                      #   in all three
  unnest(sections) %>%                                      #   of these lines.
  mutate(
    pitches =
      map(segments,
          compmus_summarise, pitches,
          method = "rms", norm = "euclidean"              # Change summary & norm.
      )
  ) %>%
  mutate(
    timbre =
      map(segments,
          compmus_summarise, timbre,
          method = "rms", norm = "euclidean"              # Change summary & norm.
      )
  )

ouch %>%
  compmus_gather_timbre() %>%
  ggplot(
    aes(
      x = start + duration / 2,
      width = duration,
      y = basis,
      fill = value
    )
  ) +
  geom_tile() +
  labs(x = "Time (s)", y = NULL, fill = "Magnitude") +
  scale_fill_viridis_c() +                              
  theme_classic() +
  labs(title = "Ouch") +
  theme(text = element_text(family = "mono"))

```

***
A cepstrogram of the song *Ouch*, which is the song with values closest to the mean valence, energy and speechiness in the "New Music" category.


### The most popular track and it's self-similarity (homework week 8)
```{r}
library(spotifyr)
library(ggplot2)
library(tidyverse)
library(compmus)
library(plotly)

cyfmh <-
  get_tidy_audio_analysis("0WSa1sucoNRcEeULlZVQXj") %>% # Change URI.
  compmus_align(bars, segments) %>%                     # Change `bars`
  select(bars) %>%                                      #   in all three
  unnest(bars) %>%                                      #   of these lines.
  mutate(
    pitches =
      map(segments,
          compmus_summarise, pitches,
          method = "mean", norm = "manhattan"              # Change summary & norm.
      )
  ) %>%
  mutate(
    timbre =
      map(segments,
          compmus_summarise, timbre,
          method = "mean", norm = "manhattan"              # Change summary & norm.
      )
  )
cyfmh %>%
  compmus_self_similarity(timbre, "cosine") %>% 
  ggplot(
    aes(
      x = xstart + xduration / 2,
      width = xduration,
      y = ystart + yduration / 2,
      height = yduration,
      fill = d
    )
  ) +
  geom_tile() +
  coord_fixed() +
  scale_fill_viridis_c(guide = "none") +
  theme_classic() +
  labs(x = "", y = "") +
  labs(title = "Can You Feel My Heart") +
  theme(text = element_text(family = "mono"))

```

***
This is a self-similarity matrix for Bring Me The Horizon's most popular song *Can You Feel My Heart*. The beginning of the song, up to approximately 125 seconds, has a clear pattern. There is a distinct melody that is repeated and alternated by singing accompanied by a calmer melody, functioning as a verse and chorus pattern. This forms a clear checkerboard pattern. At about 125 seconds the bridge sets in and the distinct melody of the chorus is not heard again until a little snippet around 180 seconds, followed by a little 'individual' section of heavy guitar music, which forms the small dark square the self-similarity matrix shows on the top right. The melody from the chorus sets in again at about 200 seconds. Here we can see a checkerboard pattern, like the one in the beginning of the song, starting to reappear.

### Another popular track and it's self-similarity (homework week 8)
```{r}
library(spotifyr)
library(ggplot2)
library(tidyverse)
library(compmus)
library(plotly)

kingslayer <-
  get_tidy_audio_analysis("7CAbF0By0Fpnbiu6Xn5ZF7") %>% # Change URI.
  compmus_align(bars, segments) %>%                     # Change `bars`
  select(bars) %>%                                      #   in all three
  unnest(bars) %>%                                      #   of these lines.
  mutate(
    pitches =
      map(segments,
          compmus_summarise, pitches,
          method = "mean", norm = "manhattan"              # Change summary & norm.
      )
  ) %>%
  mutate(
    timbre =
      map(segments,
          compmus_summarise, timbre,
          method = "mean", norm = "manhattan"              # Change summary & norm.
      )
  )
kingslayer %>%
  compmus_self_similarity(timbre, "cosine") %>% 
  ggplot(
    aes(
      x = xstart + xduration / 2,
      width = xduration,
      y = ystart + yduration / 2,
      height = yduration,
      fill = d
    )
  ) +
  geom_tile() +
  coord_fixed() +
  scale_fill_viridis_c(guide = "none") +
  theme_classic() +
  labs(x = "", y = "") +
  labs(title = "Kingslayer (feat. BABYMETAL)") +
  theme(text = element_text(family = "mono"))


```

***
This is a self-similarity matrix for another highly popular Bring Me The Horizon song, named *Kingslayer*, which they recorded together with the Japanese group BABYMETAL. Comparing this to *Can You Feel My Heart*, we can see that it is overall more homogenous. There is a clearer checkerboard pattern and the different sections are more similar to each other all throughout the song. Although, there are also more moments in the song that are different from all the other parts, which you can see from the bright criss-crossing lines. 



**Introduction**
===============================================================

### **What my analysis is about**
For my corpus I will look at the repertoire of Bring Me The Horizon. Since the release of their first four albums, which can, according to Google, all be classified as "metalcore", their music has progressed more towards alternative-/pop-/electronic-rock and they even released an [EP with experimental and electronic music](https://open.spotify.com/album/6yC6aLzX5knhWpKDidwxft). Having been in their fanbase since around 2013, when *Sempiternal* was released, I myself experienced the changes in their music. Some people argue that only their "old" music is good and their new music is "too soft", leading to them not listening to the band's music anymore. My question is, what exactly has changed about their music, which aspects have remained similar to their early music and which haven't? 

I definitely think that BMTH's music after 2013 has changed significantly compared to their earlier music and it will be most interesting to dive deeper into their work from that time on. As for specific tracks to look at *Pray for Plagues*, *Chelsea Smile* and *Shadow Moses* from their earlier work and *Drown*, *Mantra* and *Ludens* from their more recent work might be representative tracks, as they were all released as singles and thus viewed as important. Some of their more recent albums include different genres within them, so it might also be useful to examine those more closely and determine what and how big those differences are and whether they are significant.

### .........................................................................................................................................................................................................................................................................................................................................
![](https://www.impericon-mag.com/nl/wp-content/uploads/sites/7/2020/10/bringmethehorizon.jpg)

**Analysis** {.storyboard}
=============================================================

### Bring Me The Horizon: different music styles over the years compared

```{r, fig.width = 8.4}
library(tidyverse)
library(spotifyr)
library(plotly)

old <- get_playlist_audio_features("", "6oeRMX8XZ8IS7MCDb6Z1BG")
new <- get_playlist_audio_features("", "4k98rVhcCw54dhLaUMiyLK")
experimental <- get_playlist_audio_features("", "1EIpRI9TozVUiehlxAmmHq")

oldvsnew <-
  bind_rows(
    old %>% mutate(category = "Old music"),
    new %>% mutate(category = "New music"),
    experimental %>% mutate(category = "Experimental")
  )

differentstyles <- ggplot(oldvsnew, 
                          aes(x = valence, y = energy, color = speechiness, size = danceability)) +
  geom_jitter(alpha = 0.5) +
  facet_wrap(~category) +
  scale_color_gradient(low = "black", high = "purple")+
  theme_linedraw() +
  labs(title = "Bring Me The Horizon: different music styles") +
  theme(plot.title = element_text( 
    face = "bold", 
    color = "black",
    hjust = 0.5,
    size = 13)) +
  theme(legend.title = element_text(
    color = "black",
    size = 12
  )) +
  theme(axis.title = element_text(
    size = 12)) +
  xlab("Valence") + ylab("Energy") +
  theme(strip.text.x =  element_text(family = "mono")) +
  geom_text(
    aes(x = valence, y = energy, label = label),
    data = tibble(label = c("A Devastating 
    Liberation", 
                            "i apologise if 
    you feel something",
                            "Memorial"), 
                  category = c("Experimental", "New music", "Old music"), 
                  valence = c(0.15, 0.165, 0.12),
                  energy = c(0.17, 0.345, 0.0451)),
    color = "darkred",
    size = 3,
    family = "mono"
  ) +
  geom_text(
    aes(x = valence, y = energy, label = label),
    data = tibble(label = c("Danceable", "Not danceable" ),
                  category = c("New music", "New music"),
                  valence = c(0.375, 0.4),
                  energy = c(0.55, 0.47)),
    color = "grey30",
    size = 2.8,
    family = "mono"
  ) +
  theme(text = element_text(family = "mono"))

ggplotly(differentstyles)
  
```

***

For this plot I have split Bring Me The Horizon's music into three different categories, "Old Music", their first four albums, "New music", their three most recent releases, with exception of their experimental music from *Music to listen to~*, which is the third category. This album isn't exactly representative of either their "new" or "old" music style, so I made it a separate category (hence "Experimental").
  It is easily visible that BMTH's new music is much more varied than their old music. Considering that high energy + low valence = angry music, and high energy + high valence = happy music, we could conclude that their music has overall become happier. The experimental music has very low valence values, like BMTH's old music, and is also more angry and negative. Each category seems to have outliers that fall into the 'sad music' area, they are labeled in the plot.
  
With the highest danceability score being 0.6 out of a possible maximum of 1, most of their music isn't very danceable, but their newer music generally scores higher. The speechiness seems to be higher with higher valence scores, but generally the music doesn't seem very speechy. Looking at all their work together, the music seems very energetic and seems to have progressed from negative and angry towards a more diverse and positive style, with almost a kind of "dip" back towards negativity in their experimental album. 
  
### The **saddest** song in Bring Me The Horizon's repertoire

```{r}
library(spotifyr)
library(compmus)
library(tidyverse)

memorial <- get_tidy_audio_analysis("2VseRAuxHRFtlvr5zP1fKE?si=6d86a7afadaa4b93") %>%
  select(segments) %>%
  unnest(segments) %>%
  select(start, duration, pitches)

memorial %>%
  mutate(pitches = map(pitches, compmus_normalise, "euclidean")) %>%
  compmus_gather_chroma() %>% 
  ggplot(
    aes(
      x = start + duration / 2,
      width = duration,
      y = pitch_class,
      fill = value
    )
  ) +
  geom_tile() +
  labs(x = "Time (s)", y = NULL, fill = "Magnitude") +
  theme_minimal() +
  scale_fill_viridis_c() +
  theme(text = element_text(family = "mono")) +
  labs(title = "Memorial")




```


***

This is a chromagram of the song *Memorial*, which is, according to it's measurements of valence and energy, the **saddest** song in Bring Me The Horizon's entire repertoire. As you can see, the song is **quite repetitive** and has a few layers that really stand out. *Memorial* is an entirely instrumental song with a continuous underlying sound and is used in the album as a transition into the next track. There are clearly audible, and in the chromagram visible, **high and loud 'screeching' noises** in the song and a few notes that are softly and repeatedly being played throughout the song. The texture of the song is very simple and also very clearly repesented in this chromagram.

### The **happiest** song in Bring Me The Horizon's repertoire

```{r}
library(spotifyr)
library(compmus)
library(tidyverse)

onebyone <- get_tidy_audio_analysis("6sIbv1oWOuma2qV907MUbk") %>%
  select(segments) %>%
  unnest(segments) %>%
  select(start, duration, pitches)

onebyone %>%
  mutate(pitches = map(pitches, compmus_normalise, "euclidean")) %>%
  compmus_gather_chroma() %>% 
  ggplot(
    aes(
      x = start + duration / 2,
      width = duration,
      y = pitch_class,
      fill = value
    )
  ) +
  geom_tile() +
  labs(x = "Time (s)", y = NULL, fill = "Magnitude") +
  theme_minimal() +
  scale_fill_viridis_c() +
  theme(text = element_text(family = "mono")) +
  labs(title = "1x1 (feat. Nova Twins)")

```

***
This is a chromagram of the song *1x1 (feat. Nova Twins)*, which is, according to it's measurements of valence and energy, the **happiest** song in Bring Me The Horizon's entire repertoire. As you can see, this song is **all over the place**. The line of C#/Db stands out a little bit, with a higher magnitude overall. The song consists of heavy drums and guitar combined with electronic music and keyboard sounds, all accompanied by the singing voices of either Bring Me The Horizon's frontman Oliver Sykes or the featuring artist the Nova Twins. The only big visible thing that is happening here is at **around 160 seconds**, where the heavy instruments that support the rest of the song go quiet and we hear only a keyboard and a singing voice.

Conclusion
=============================================================================
